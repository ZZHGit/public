## 效率指数（Efficiency Index）计算规则

[Sibbay EI 效率指数定义](https://github.com/sibbay-ai/public/blob/master/icp%E5%A5%96%E5%8A%B1%E6%9C%BA%E5%88%B6.md#52%E6%95%88%E7%8E%87%E6%8C%87%E6%95%B0efficiency-index)

### 计算原则

- 一切基于 github 上有据可查的 issue 以及针对该 issue 的被合并的 pr 进行计算
- 通过 github API 获取数据作为计算依据
- 计算方法与相关代码完全公开
- 计算结果定期累计，完全公示
- 若计算规则由所调整，调整前已经形成的累计不作溯及以往的调整

### 单期 EI 计算规则（过程描述）

#### 第一步：由程序分配待评判的 icp issue  

1. 根据 CI 计算规则，找到当期所有符合 ICP 规范的，正确合并且产生工作量累计的 issue.  
   赋值为 `ei_issues`

2. 找到所有这些 issues 的执行者，以 assignees 为准。  
   赋值为 `ei_members`

3. 将 `ei_issues` 进行类别划分（开发类，文档撰写类，UI 类，管理类，等）；  

4. 将 `ei_issues` 按照划分好的类别，分配给 `ei_members` 进行评判.  
   分配方式为带有预设条件的随机分配，预设条件为：  
   - 对应类别的 issue 分配给对应类别工作的执行者；
   - 每个执行者会分配到 2 个 issue;
   - 只分配他人的 issue 给执行者，不分配该执行者自己的 issue;
   - 分配给同一执行者的 issue, icp size 尽量接近；
   - 若执行者 A 当期分配到了执行者 B 的 issue, 则下期尽量轮换分配；

5. 记录分配结果，存入数据库；

#### 由各执行者对被分配的 icp issue 进行效率评判；

1. 根据分配结果，发邮件，通知所有 `ei_members` 进行 EI 评价；

2. 评价方式如下：  
   根据收到的邮件，获取到需要自己进行 EI 评价的 ICP issue.  
   从待评价的两个 issue 中，通过观察任务内容，以及沟通和提交的过程，选择出自己认为效率比较高的 issue.  
   在此 issue 的顶楼，回复大拇指 👍 表情；无需给出具体理由；  
   被回复的 issue 对应的执行者，效率点数 +1

3. 从邮件发出开始，执行者需要在两天内对被分配的 issue 进行评判，并完成表情回复；  
   若没有及时进行评判和回复，则该执行者效率点数 -1

4. 根据上述规则，通过程序统计当期所有执行者的效率点数，存入数据库；

#### 根据效率点数引发 EI 变化

1. 每个执行者当期的 EI 变化按以下方式计算：  
   EI 变化量 = 当期效率点数 / 当期累计 size

2. 根据 EI 变化量，调整所有执行者的 EI. EI 每期累计。  
   当期效率点数只用来计算 EI 变化，不累计。


### 相关统计实现代码位置

TODO

### EI 累积

EI 针对各个开发者，逐期统计，逐期累积，若因特殊情况导致变化，变化内容需公示。




